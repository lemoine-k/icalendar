# 📅 iCalSched - 智能日历应用

<div align="center">

[![Status](https://img.shields.io/badge/status-稳定版-success)]()
[![Version](https://img.shields.io/badge/version-1.2.0-blue)]()
[![Platform](https://img.shields.io/badge/platform-iOS%20%7C%20Android%20%7C%20Web-lightgrey)]()
[![License](https://img.shields.io/badge/license-MIT-green)]()

一个功能完整、设计精美的跨平台智能日历应用，支持农历、节假日、事件订阅、智能提醒等功能

[功能特性](#-功能特性) • [快速开始](#-快速开始) • [安装指南](#-安装指南) • [技术架构](#-技术架构) • [产品报告](#-产品报告)

</div>

---

## ✨ 功能特性

### 🎯 核心功能

#### 📅 多视图日历展示
- **月视图**：完整月份日历，支持农历显示、节假日标识、事件指示器
- **周视图**：一周7天概览，24小时时间轴，事件时间段显示
- **日视图**：单日详细信息，24小时时间轴，完整事件列表
- **流畅切换**：支持视图切换动画
- **智能布局**：自动适配屏幕尺寸，支持横竖屏切换

#### ✏️ 智能事件管理
- **快速创建**：点击日期即可创建事件，支持标题、描述、地点
- **完整编辑**：点击事件卡片编辑，支持所有属性修改
- **一键删除**：支持快速删除事件，带确认提示
- **全天事件**：支持全天事件和跨天事件设置
- **优先级管理**：3级优先级（高/中/低），不同颜色标识
- **事件搜索**：支持按标题搜索事件

#### 🔁 高级重复功能
- **重复模式**：支持每天/每周/每月/每年重复
- **自定义间隔**：可设置重复间隔和次数
- **灵活规则**：支持按星期几重复（如每周一、三、五）
- **重复终止**：支持设置重复次数或结束日期
- **智能预览**：重复事件在日历中正确显示

#### 📚 日历订阅功能
- **预设订阅**：中国法定节假日等官方日历
- **自动同步**：定期自动同步订阅内容，智能刷新
- **状态管理**：显示同步状态、事件数量、错误信息
- **订阅控制**：启用/禁用订阅，删除订阅
- **只读保护**：订阅事件不可编辑，保持数据完整性
- **批量同步**：支持一键同步所有订阅

#### 🔔 智能提醒系统
- **多种提醒时间**：5分钟、15分钟、30分钟、1小时、2小时、1天、2天、1周前提醒
- **系统通知**：集成Android/iOS原生通知系统，支持声音和震动
- **权限管理**：智能的通知权限请求和状态检查
- **通知调度**：自动调度和取消事件通知，支持多个提醒时间
- **测试功能**：内置通知测试功能，验证系统是否正常工作
- **多提醒支持**：同一事件可设置多个提醒时间

#### 🌙 中国农历支持
- **农历日期**：显示农历年月日（1900-2100年）
- **24节气**：自动计算和标注24节气
- **传统节日**：春节、端午、中秋等传统节日识别
- **生肖年份**：显示当前生肖
- **重要日期**：自动标识重要农历节日
- **春节标识**：春节期间所有假期自动标注"春"字标识

#### 🎨 精美主题系统
- **6个主题**：苹果红、苹果蓝、苹果绿、苹果紫、苹果橙、暗色模式
- **完整适配**：所有界面元素动态跟随主题色
- **实时切换**：即时更新，无需重启应用
- **暗色优化**：特殊的半透明背景和护眼配色
- **iOS风格**：采用iOS设计语言，卡片式布局，流畅动画

#### 🚀 用户体验优化
- **快速导航**："今天"按钮、快速跳转、月份选择
- **实时统计**：显示个人事件数、今天事件数
- **流畅动画**：视图切换、模态框、按钮反馈全部使用流畅动画
- **响应式设计**：适配不同屏幕尺寸，统一体验
- **iOS风格UI**：采用iOS设计规范，卡片式布局，底部对齐操作按钮
- **大触摸区域**：所有交互元素至少44x44px，提升操作体验
- **视觉反馈**：阴影、圆角、动画等提供清晰的交互反馈

---

## 🚀 快速开始

### 环境要求

- Node.js >= 14.0.0
- npm 或 yarn
- Expo CLI
- Android Studio（Android开发）
- Xcode（iOS开发，仅Mac）

### 安装步骤

1. **克隆项目**
```bash
git clone https://github.com/yourusername/icalSched.git
cd icalSched
```

2. **安装依赖**
```bash
npm install
# 或
yarn install
```

3. **启动应用**
```bash
# 启动开发服务器
npm start

# 在浏览器中运行
npm run web

# 在 Android 上运行
npm run android

# 在 iOS 上运行（需要 Mac）
npm run ios
```

---

## 📱 安装指南

### 方法一：使用 Expo Go（推荐新手）

1. **安装 Expo Go**
   - iOS：App Store 搜索 "Expo Go"
   - Android：Google Play 搜索 "Expo Go"

2. **运行应用**
   ```bash
   npm start
   ```

3. **扫码连接**
   - iOS：相机扫描二维码
   - Android：Expo Go 内扫描二维码

### 方法二：构建独立应用（推荐）

**Android APK**
```bash
# 安装 EAS CLI
npm install -g eas-cli

# 登录 Expo 账号
eas login

# 构建 APK
eas build --platform android --profile preview

# 下载并安装 APK
```

**iOS 应用**
```bash
# 需要 Apple Developer 账号
eas build --platform ios --profile preview
```

### 方法三：本地构建

**Android**
```bash
# 需要 Android Studio
npm run android

# 生成发布版 APK
cd android && ./gradlew assembleRelease
```

**iOS**
```bash
# 需要 Mac 和 Xcode
cd ios && pod install
npm run ios
```

---

## 🏗️ 技术架构

### 技术栈

- **React Native** - 跨平台移动应用框架
- **Expo** - 开发工具链和部署平台
- **React Hooks** - 现代化状态管理
- **Animated API** - 高性能原生动画
- **AsyncStorage** - 本地数据持久化
- **Push Notification** - 跨平台通知系统

### 核心模块

#### 📅 iCalendar 引擎 (`utils/icalendar.js`)
- 完整支持 RFC 5545 核心标准
- 事件创建、编辑、删除（createVEvent, updateVEvent）
- 重复规则（RRULE）解析和生成
- 日期时间格式转换
- 导出为标准 iCalendar 格式

#### 🔔 通知系统 (`utils/notifications.js`)
- 跨平台本地通知推送（react-native-push-notification）
- 智能权限管理和状态检查
- 多种提醒时间预设（5分钟到1周前）
- 通知调度和自动取消
- Android 通知渠道管理
- 声音、震动、优先级配置

#### 🌙 农历计算 (`utils/lunar.js`)
- 1900-2100年农历转换（solarToLunar）
- 24节气精确计算
- 传统节日识别
- 生肖年份显示
- 重要日期判断
- 压缩存储，高效查询

#### 🔗 订阅管理 (`utils/subscription.js`)
- 智能同步机制（syncSubscription）
- 预设日历源（PRESET_CALENDARS）
- 错误处理和重试
- 状态实时更新
- URL验证和CORS支持

#### 🎨 主题系统 (`utils/themes.js`)
- 6个精心设计的主题（THEMES）
- 动态颜色应用（getTheme）
- 暗色模式优化
- 实时切换支持

### 项目结构

```
icalSched/
├── App.js                    # 主应用组件
├── components/               # 视图组件
│   ├── MonthView.js         # 月视图
│   ├── WeekView.js          # 周视图
│   └── DayView.js           # 日视图
├── utils/                   # 核心工具模块
│   ├── icalendar.js        # iCalendar 标准实现
│   ├── lunar.js            # 农历计算
│   ├── subscription.js     # 订阅管理
│   ├── notifications.js    # 通知系统
│   └── themes.js           # 主题系统
├── assets/                 # 资源文件
├── android/               # Android 原生代码
├── package.json           # 项目配置
├── app.json              # Expo 配置
├── eas.json              # 构建配置
└── 产品报告.md           # 产品报告文档
```

---

## 🎯 技术亮点

### 1. 完整的 iCalendar 标准实现
- ✅ 支持 RFC 5545 核心规范
- ✅ 事件创建、编辑、删除功能
- ✅ 复杂重复规则支持（RRULE）
- ✅ 与主流日历应用数据格式兼容

### 2. 精确的农历计算系统
- ✅ 200年农历数据（1900-2100）
- ✅ 24节气自动计算
- ✅ 传统节日识别
- ✅ 压缩存储，O(1) 查询

### 3. 智能订阅同步
- ✅ 自动检测更新时机
- ✅ 完善的错误处理和重试
- ✅ 状态实时更新
- ✅ CORS 跨域支持

### 4. 流畅的动画体验
- ✅ 原生驱动动画（60fps）
- ✅ 120ms 快速响应
- ✅ 不阻塞 JS 线程
- ✅ 优雅的过渡效果

### 5. 完整的主题系统
- ✅ 6个精美主题
- ✅ 动态颜色应用
- ✅ 暗色模式优化
- ✅ 实时切换

### 6. 智能通知提醒系统
- ✅ 跨平台本地通知推送
- ✅ 多种提醒时间选项（5分钟到1周前）
- ✅ 智能权限管理和状态检查
- ✅ Android 通知渠道优化
- ✅ 声音、震动、优先级配置
- ✅ 自动调度和取消机制

### 7. iOS风格UI设计
- ✅ 卡片式布局
- ✅ 底部对齐操作按钮
- ✅ 流畅的过渡动画
- ✅ 大触摸区域（44x44px）
- ✅ 清晰的视觉反馈

---

## 📊 项目统计

- **代码行数**：4500+ 行
- **功能模块**：5 个核心模块
- **视图组件**：3 个主要视图（月/周/日）
- **支持主题**：6 个精美主题
- **支持平台**：iOS / Android / Web
- **农历范围**：1900-2100年（200年）
- **模态框**：4 个（事件编辑、订阅管理、主题选择、快速跳转）
- **核心功能**：事件管理、订阅同步、农历显示、主题切换、智能提醒
- **UI组件**：iOS风格卡片、开关、按钮、时间选择器、日期选择器

---

## 📖 使用指南

### 🔔 事件提醒功能

#### 设置事件提醒

1. **添加新事件**
   - 点击右下角的 "+" 按钮
   - 填写事件标题、日期和时间
   - 在"提醒设置"部分选择需要的提醒时间
   - 支持多个提醒时间同时设置

2. **提醒时间选项**
   - 5分钟前、15分钟前、30分钟前
   - 1小时前、2小时前
   - 1天前、2天前、1周前

#### 通知权限管理

**首次使用**
- 应用会自动请求通知权限
- Android 13+ 会显示系统权限对话框
- iOS 会显示通知权限请求

**权限状态检查**
- 主界面显示当前权限状态
- 绿色✅表示已授权，红色❌表示未授权
- 可随时重新请求权限

**测试通知功能**
- 在权限卡片中点击"测试通知"
- 立即发送测试通知验证功能
- 检查通知栏是否收到测试消息

#### 故障排除

**通知不显示**
1. 检查应用通知权限是否开启
2. 确认系统勿扰模式设置
3. 检查设备音量和震动设置
4. 使用"测试通知"功能验证

**Android 特定问题**
- 部分厂商ROM需要允许应用自启动
- 关闭电池优化以确保后台运行
- 检查通知渠道设置

### 📅 基本功能使用

#### 创建事件
1. 点击日期或右下角"+"按钮
2. 填写事件信息
3. 设置提醒时间（可选）
4. 点击"添加事件"

#### 查看事件
- 月视图：点击日期查看当日事件
- 事件列表：显示所有事件及提醒设置
- 事件详情：显示完整事件信息

#### 删除事件
- 点击事件卡片右侧的🗑️按钮
- 确认删除操作
- 相关提醒通知会自动取消

#### 订阅日历
1. 点击"订阅"按钮打开订阅管理
2. 选择预设订阅源
3. 点击"订阅"按钮
4. 等待同步完成
5. 订阅事件会自动显示在日历中

#### 切换主题
1. 点击"主题"按钮
2. 选择喜欢的主题
3. 主题立即生效

---

## 🛠️ 开发指南

### 添加新功能

1. **新视图组件**：在 `components/` 目录创建
2. **新工具模块**：在 `utils/` 目录创建
3. **新主题**：在 `utils/themes.js` 中添加

### 调试技巧

```bash
# 查看日志
npm start

# React Native Debugger
# 浏览器打开 http://localhost:19002

# Android 日志
adb logcat

# iOS 日志
xcrun simctl spawn booted log stream
```

### 代码规范

- 使用 ES6+ 语法
- 函数式组件 + Hooks
- 遵循 React Native 最佳实践
- 代码注释完整
- 遵循 iOS 设计规范

---

## 📄 产品报告

详细的产品报告请查看 [产品报告.md](./产品报告.md)，包含：
- 产品功能介绍
- 程序概要设计
- 软件架构图
- 技术亮点和实现原理



---

## 📄 许可证

本项目采用 MIT 许可证 - 查看 [LICENSE](LICENSE) 文件了解详情。

---

## 🙏 致谢

- [React Native](https://reactnative.dev/) - 跨平台移动应用框架
- [Expo](https://expo.dev/) - 开发工具链
- [RFC 5545](https://tools.ietf.org/html/rfc5545) - iCalendar 标准
- 开源社区的贡献者们

---

<div align="center">

**⭐ 如果这个项目对你有帮助，请给它一个星标！**

Made with ❤️ by iCalSched Team

</div>
